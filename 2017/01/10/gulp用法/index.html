<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>gulp 使用教程 | 我的博客</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <link rel="manifest" href="/manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content=我的博客   >
  <link rel="apple-touch-icon" href="img/icons/152.png">
  
  
  <meta name="theme-color" content="#0c0c1f">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <link rel="alternate" href="/atom.xml" title="我的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body class=" ">
  	   <div class="iewarn" id="iewarn">
<div>---------!!!!!!!!!!!!!!!!-----------------</div>
检测到您正在使用IE9或更低版本浏览器访问本站，为了您的阅读体验，本站推荐您使用<a href="https://www.google.com/chrome/" target="_blank" >Chrome浏览器</a> 或者<a href="https://www.mozilla.org/en-US/firefox/products/" target="_blank" >Firefox浏览器 </a> 对本站进行访问

</div>
      <header class="main-header">

<div class="logo nav-list">
<a href="/"><img src=http://i1.ciimg.com/1949/13562fccde474f1b.jpg alt="logo" width="50px" height="50px" /></a>
</div>
<ul class="nav-list nav">

<li class="nav-list">
<a href="/">
<i class="fa fa-home" aria-hidden="true" ></i>
首页
</a>
</li>



	
<li class="nav-list">
<a href= /about  >
<i class="fa fa-youtube-play" aria-hidden="true" ></i>
关于
</a>
</li>



<li class="nav-list">
<a href="/atom.xml" target="_blank" >
<i class="fa fa-feed" aria-hidden="true" ></i>
订阅
</a>
</li>



<li class="nav-list lightmode ">
<a href="javascript:;" >
<i class="fa fa-moon-o" aria-hidden="true"></i>
关灯
</a>
</li>
</ul>

</header>
        <article>
  <div class="article-share">
<div id="qrcode">
	<div class="qr-text">
	扫一扫，分享到微信
	<i class="fa fa-window-close-o fa-2" aria-hidden="true"></i>
	</div>
</div>
<ul class="share-content">
<li >
		<i class="fa fa-share-alt" aria-hidden="true"></i>
	</li>
	<li>
		<a ><i class="fa fa-weixin" aria-hidden="true" id="toweixin"></i></a>
	</li>
	<li>
		<a ><i class="fa fa-weibo" aria-hidden="true" id="toweibo"></i></a>
	</li>
	<li>
		<a ><i class="fa fa-twitter" aria-hidden="true" id="totwitter"></i></a>
	</li>
</ul>
</div>
<div class="article main-body" itemscope itemprop="blogPost">
  <div class="article-meta">
    <!--采用相对的时间或者绝对的时间，默认相对-->

<div class="article-date">
  	<time datetime="2017-01-10T14:29:45.000Z" itemprop="datePublished">
  	
  	
  	
  	
  	
    
          
      
      
        
    
    
    
  	
  		
  	
  	
    
    
  	
  	 	
  	
  		
  	
  	
    
    
  	
  	
  	
  		
  	
  	
  	7个月以前发布


  
<div>
阅读时长: 18分钟
</div>
</div>




  </div>
  <div class="article-inner">
   
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      gulp 使用教程
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h2><p>Gulp 是前端开发过程中对代码进行构建的工具，是自动化项目的构建利器；她不仅能对网站资源进行优化，而且在开发过程中很多重复的任务能够使用正确的工具自动完成；使用她，我们不仅可以很愉快的编写代码，而且大大提高我们的工作效率。</p>
<p>Gulp 是基于 Nodejs 的自动任务运行器， 她能自动化地完成 JavaScript/coffee/sass/less/html/image/css 等文件的的测试、检查、合并、压缩、格式化、浏览器自动刷新、部署文件生成，并监听文件在改动后重复指定的这些步骤。在实现上，她借鉴了 Unix 操作系统的管道（pipe）思想，前一级的输出，直接变成后一级的输入，使得在操作上非常简单。</p>
<p>通过本文，我们将学习如何使用 Gulp 来改变开发流程，从而使开发更加快速高效。大家也可参考 <a href="http://www.gulpjs.com.cn" target="_blank" rel="external">Gulp 中文网</a> 阅读 API 文档。</p>
<p>要使用 Gulp 的一个大致流程是：安装 Nodejs -&gt; 全局安装 Gulp -&gt; 项目安装 Gulp 以及 Gulp 插件 -&gt; 配置 gulpfile.js -&gt; 运行任务</p>
<h2 id="2-安装"><a href="#2-安装" class="headerlink" title="2. 安装"></a>2. 安装</h2><h3 id="2-1-安装-Nodejs"><a href="#2-1-安装-Nodejs" class="headerlink" title="2.1 安装 Nodejs"></a>2.1 安装 Nodejs</h3><p>Gulp 是基于 Nodejs 的，所以在安装 Gulp 前先安装 Nodejs。</p>
<p>进入 <a href="https://nodejs.org/en/" target="_blank" rel="external">Nodejs 官网</a>，会自动检测本地操作系统类型及位数，下载稳定版本的 Nodejs 安装程序。LTS 表示是稳定版本，Current 表示当前最新版本。本文下载的是 v6.9.2 LTS 版本。</p>
<p><img src="/images/posts/gulp/nodejs.png" alt="nodejs"></p>
<p>下载后根据向导安装即可。</p>
<p>安装完毕 Nodejs 后即可测试是否安装成功。在命令提示符下（通常 windows 系统是 cmd，mac 系统是终端）输入 <code>node -v</code> 即可查看安装的 Nodejs 版本。</p>
<p>常用命令说明：</p>
<p><code>node -v</code>：查看安装的 Nodejs 版本，出现版本号，说明已正确安装nodejs。</p>
<p><code>npm -v</code>：查看npm的版本号，npm是在安装 Nodejs 时一同安装的 Nodejs 包管理器。</p>
<h3 id="2-2-npm-简介"><a href="#2-2-npm-简介" class="headerlink" title="2.2 npm 简介"></a>2.2 npm 简介</h3><p>npm 是 node package manager 的简称，它是 Nodejs 的包管理器，用于 node 插件的管理，如安装、卸载、依赖管理等。</p>
<p><strong>安装插件</strong></p>
<pre><code>npm install &lt;name&gt; [-g] [--save-dev]
</code></pre><p>\<name> 表示插件名称，如 gulp。</name></p>
<p>-g 表示全局安装。全局安装可以通过命令行在任何地方调用它，本地安装（非全局安装）将安装在定位目录的 node_modules 文件夹下，通过 require() 调用。</p>
<p>--save 表示将保存配置信息至 package.json 文件，package.json 是 Nodejs 项目配置文件。之所以要保存至 package.json，是因为 Nodejs 插件包相对来说非常庞大，将配置信息写入 package.json 并将其加入版本管理，其他开发者对应下载即可（命令提示符执行 <code>npm install</code>，则会根据 package.json 下载所有需要的包，<code>npm install --production</code> 只下载 dependencies 节点的包）。</p>
<p>-dev 表示保存至 package.json 的 devDependencies 节点，不指定 -dev 将保存至 dependencies 节点；一般保存在 dependencies 的像这些：express/ejs/body-parser 等。</p>
<p><strong>卸载插件</strong></p>
<pre><code>npm uninstall &lt;name&gt; [-g] [--save-dev]
</code></pre><p>要卸载插件，不要直接删除本地插件包，需要使用上述命令来卸载。</p>
<p><strong>更新插件</strong></p>
<pre><code>npm update &lt;name&gt; [-g] [--save-dev]
</code></pre><p>要更新全部插件，可使用<code>npm update [--save-dev]</code>。</p>
<h3 id="2-3-cnpm"><a href="#2-3-cnpm" class="headerlink" title="2.3 cnpm"></a>2.3 cnpm</h3><p>npm 安装插件是从国外服务器下载资源，受网络影响大，可能出现异常，可以使用<a href="http://npm.taobao.org" target="_blank" rel="external">淘宝镜像</a>，淘宝镜像是一个完整 npmjs.org 镜像，可以用它代替官方版本，其同步频率目前为 10 分钟一次以保证尽量与官方服务同步。</p>
<p>为保证安装能够正常进行，推荐使用淘宝镜像。cnpm 安装命令为：<code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code>。</p>
<p>cnpm 的用法与 npm 完全一致，只需要将执行 npm 命令的地方替换为 cnpm 即可。</p>
<h3 id="2-4-全局安装-Gulp"><a href="#2-4-全局安装-Gulp" class="headerlink" title="2.4 全局安装 Gulp"></a>2.4 全局安装 Gulp</h3><p>为了在任何地方都可以使用到 Gulp 命令来执行任务，我们全局安装 Gulp，可以在命令提示符下使用 <code>npm install gulp -g</code> 或 <code>cnpm install gulp -g</code> 来实现安装。</p>
<p>等待安装结束，可使用 <code>gulp -v</code> 命令测试 Gulp 版本，如果看到版本号出现，则说明安装成功。本文 Gulp 版本为 3.9.1。</p>
<h3 id="2-5-生成-package-json"><a href="#2-5-生成-package-json" class="headerlink" title="2.5 生成 package.json"></a>2.5 生成 package.json</h3><p>package.json 是基于 Nodejs 项目必不可少的配置文件，它是存放在项目根目录的 json 文件。</p>
<p>package.json 用来存放即将安装的插件 name 和 version，这个文件有什么用呢？当我们把项目拷贝给别人的时候不需要拷贝插件，只需要把项目文件、package.json 和 gulpfile.js 拷贝过去就可以，接收人 cd 到项目文件目录直接输入 <code>npm install</code> 即可安装上我们拷贝前安装的各种插件。</p>
<p>package.json 文件格式如下：</p>
<pre><code>{
  &quot;name&quot;: &quot;demo&quot;, // 项目名称
  &quot;version&quot;: &quot;1.0.0&quot;, // 项目版本
  &quot;description&quot;: &quot;test page&quot;, // 项目描述
  &quot;main&quot;: &quot;example.js&quot;, // 入口文件
  &quot;scripts&quot;: { // 运行脚本命令的 npm 命令行缩写
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;author&quot;: &quot;xiaoming&quot;, // 作者
  &quot;license&quot;: &quot;ISC&quot; // 项目许可协议
}
</code></pre><p>可直接复制上述文本后修改，要注意的是 json 文件中不允许使用注释内容，所以如果是复制修改还需要将注释去掉。或在命令提示符下使用 <code>npm init</code> 命令来初始化自动生成 package.json 文件：</p>
<pre><code>$ npm init
This utility will walk you through creating a package.json file.
It only covers the most common items, and tries to guess sensible defaults.

See `npm help json` for definitive documentation on these fields
and exactly what they do.

Use `npm install &lt;pkg&gt; --save` afterwards to install a package and
save it as a dependency in the package.json file.

Press ^C at any time to quit.
name: (demo) 
version: (1.0.0) 
description: test page
entry point: (example.js) 
test command: 
git repository: 
keywords: 
author: xiaoming
license: (ISC) 
About to write to /Users/isaac/Documents/HTML5/projects/demo/package.json:

{
  &quot;name&quot;: &quot;demo&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;test page&quot;,
  &quot;main&quot;: &quot;example.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;author&quot;: &quot;xiaoming&quot;,
  &quot;license&quot;: &quot;ISC&quot;
}


Is this ok? (yes) yes
</code></pre><p><code>npm init</code> 执行后会提示输入项目名称、版本、描述等信息，按提示输入即可，也可以留空。</p>
<h3 id="2-6-本地安装-Gulp-及-Gulp-插件"><a href="#2-6-本地安装-Gulp-及-Gulp-插件" class="headerlink" title="2.6 本地安装 Gulp 及 Gulp 插件"></a>2.6 本地安装 Gulp 及 Gulp 插件</h3><p>使用 <code>npm install gulp --save-dev</code>（安装了 cnpm 使用 <code>cnpm install gulp --save-dev</code>）在项目根目录本地安装 Gulp。</p>
<p>我们全局安装了 Gulp，又在项目目录中安装了本地 Gulp，主要因为全局安装 Gulp 是为了执行 Gulp 任务，本地安装 Gulp 则是为了调用 Gulp 插件的功能。</p>
<p><code>--save-dev</code> 这个命令是将安装的插件信息写入 package.json 文件内的“devDependencies”属性内，执行后 package.json 文件内容变为：</p>
<pre><code>{
  &quot;name&quot;: &quot;demo&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;test page&quot;,
  &quot;main&quot;: &quot;example.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;author&quot;: &quot;xiaoming&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: { // 项目依赖的插件
    &quot;gulp&quot;: &quot;^3.9.1&quot;
  }
}
</code></pre><p>本地安装 Gulp 后，继续安装常用的 Gulp 插件，本文安装了两个插件（JS 压缩插件与 CSS 压缩插件）来作为示例：</p>
<pre><code>$ npm install gulp-minify-css gulp-uglify --save-dev
</code></pre><h2 id="3-开始使用-Gulp"><a href="#3-开始使用-Gulp" class="headerlink" title="3. 开始使用 Gulp"></a>3. 开始使用 Gulp</h2><h3 id="3-1-建立-gulpfile-js-文件"><a href="#3-1-建立-gulpfile-js-文件" class="headerlink" title="3.1 建立 gulpfile.js 文件"></a>3.1 建立 gulpfile.js 文件</h3><p>Gulp 需要一个文件作为它的主文件，在 Gulp 中这个文件叫做 gulpfile.js。</p>
<p>新建一个文件名为 gulpfile.js 的文件，然后放到项目目录中。然后在 gulpfile.js 文件中定义任务。</p>
<p>下面是一个最简单的 gulpfile.js 文件内容示例，它定义了一个默认的任务：</p>
<pre><code>var gulp = require(&quot;gulp&quot;);
gulp.task(&quot;default&quot;, function(){
    console.log(&quot;hello&quot;);
});
</code></pre><h3 id="3-2-gulp-task-方法"><a href="#3-2-gulp-task-方法" class="headerlink" title="3.2 gulp.task() 方法"></a>3.2 gulp.task() 方法</h3><p>gulp.task() 方法的主要是用来定义任务，其语法结构如下：</p>
<pre><code>gulp.task(name[, deps], fn)
</code></pre><p>参数 name 为任务名称。</p>
<p>deps 是当前定义的任务需要依赖的其他任务，为一个数组。当前定义的任务会在所有依赖的任务执行完毕后才开始执行。如果没有依赖，则可省略这个参数。</p>
<p>fn 为任务函数，我们把任务要执行的代码都写在里面。该参数也是可选的。</p>
<pre><code>var minifyCss = require(&quot;gulp-minify-css&quot;);
gulp.task(&quot;minify-css&quot;, function(){
    gulp.src(&quot;css/*.css&quot;)
        .pipe(minifyCss({
            advanced:false, // 是否开启高级优化（合并选择器等）
            compatibility:&quot;ie7&quot;, // 启用兼容模式；&apos;ie7&apos;：IE7兼容模式，&apos;ie8&apos;：IE8兼容模式，&apos;*&apos;：IE9+兼容模式
            keepBreaks:false, // 是否保留换行
            keepSpecialComments:&quot;*&quot; // 保留所有特殊前缀，如果不加这个参数，有可能将会删除你的部分前缀
        }))
        .pipe(gulp.dest(&quot;dist&quot;));
});
</code></pre><p>上例中创建一个 CSS 压缩的任务，使用 gulp-minify-css 插件（现在 gulp-minify-css 已被废弃掉了，使用 <a href="https://github.com/scniro/gulp-clean-css" target="_blank" rel="external">gulp-clean-css</a> 代替，用法基本一致）。要执行该任务，可使用任务名称来执行，使用：</p>
<pre><code>$ gulp minify-css
</code></pre><p>再创建一个 js 压缩的任务，使用 <a href="https://github.com/terinjokes/gulp-uglify" target="_blank" rel="external">gulp-uglify</a>：</p>
<pre><code>var uglify = require(&quot;gulp-uglify&quot;);
gulp.task(&quot;uglify&quot;, function(){
    gulp.src([&quot;js/*.js&quot;, &quot;!js/*.min.js&quot;])
        .pipe(uglify({
            mangle:true, // 是否修改变量名
            compress:true // 是否完全压缩
        }))
        .pipe(gulp.dest(&quot;dist/js&quot;));
});
</code></pre><p>执行 JS 压缩任务：</p>
<pre><code>$ gulp uglify
</code></pre><p>当然不跟任务名称，也可以使用 <code>gulp</code> 命令直接执行任务，默认执行的是名称为 “default” 的任务。</p>
<p>我们可以将所有任务都放到 “default” 任务中：</p>
<pre><code>gulp.task(&quot;default&quot;, [&quot;minify-css&quot;, &quot;uglify&quot;]);
</code></pre><p>执行：</p>
<pre><code>$ gulp
</code></pre><p>将会调用 default 任务里的所有任务 [“minify-css”, “uglify”]。</p>
<h3 id="3-3-gulp-src-方法"><a href="#3-3-gulp-src-方法" class="headerlink" title="3.3 gulp.src() 方法"></a>3.3 gulp.src() 方法</h3><p>gulp.src() 方法是用来获取流的，这个流里的内容不是原始的文件流，而是一个虚拟文件对象流，这个虚拟文件对象中存储着原始文件的路径、文件名、内容等信息，这暂时不用去深入理解，只需简单的理解可以用这个方法来读取需要操作的文件即可。语法结构如下：</p>
<pre><code>gulp.src(globs[, options])
</code></pre><p>参数 globs 是文件匹配模式（类似正则表达式），用来匹配文件路径（包括文件名），当然这里也可以直接指定某个具体的文件路径。当有多个匹配模式时，该参数可以为一个数组。</p>
<p>options 为可选参数，通常不需要用到。</p>
<p>globs 文件匹配模式说明：</p>
<p><code>*</code> 匹配文件路径中的0个或多个字符</p>
<p><code>**</code> 匹配路径中的0个或多个目录及其子目录,需要单独出现，即它左右不能有其它东西，如果出现在末尾，也能匹配文件</p>
<p><code>?</code> 匹配文件路径中的一个字符</p>
<p><code>[...]</code> 匹配方括号中出现的字符中的任意一个，当方括号中第一个字符为^或!时，则表示不匹配方括号中出现的其他字符中的任意一个，类似 js 正则表达式中的用法</p>
<p><code>!(pattern|pattern|pattern)</code> 匹配任何与括号中给定的任一模式都不匹配的</p>
<p><code>?(pattern|pattern|pattern)</code> 匹配括号中给定的任一模式0次或1次，类似于 js 正则中的(pattern|pattern|pattern)?</p>
<p><code>+(pattern|pattern|pattern)</code> 匹配括号中给定的任一模式至少1次，类似于 js 正则中的(pattern|pattern|pattern)+</p>
<p><code>*(pattern|pattern|pattern)</code> 匹配括号中给定的任一模式0次或多次，类似于 js 正则中的(pattern|pattern|pattern)*</p>
<p><code>@(pattern|pattern|pattern)</code> 匹配括号中给定的任一模式1次，类似于 js 正则中的(pattern|pattern|pattern)</p>
<p><code>gulp.src(&quot;css/*.css&quot;)</code> 表示匹配 css 文件夹下所有后缀为 .css 的文件。</p>
<h3 id="3-4-gulp-dest-方法"><a href="#3-4-gulp-dest-方法" class="headerlink" title="3.4 gulp.dest() 方法"></a>3.4 gulp.dest() 方法</h3><p>gulp.dest() 方法是用来写文件的，可以通过管道传输。语法结构为：</p>
<pre><code>gulp.dest(path[, options])
</code></pre><p>参数 path 为写入文件的路径，如果文件路径不存在，会自动创建。</p>
<p><code>.pipe(gulp.dest(&quot;dist&quot;))</code> 表示将生成的文件写入 dist 目录中。</p>
<p>Gulp 的使用流程一般是：先通过 gulp.src() 方法获取到我们想要处理的文件流，然后把文件流通过 pipe() 方法导入到 gulp 的插件中，最后把经过插件处理后的流再通过 pipe() 方法导入到 gulp.dest() 中，gulp.dest() 方法则把流中的内容写入到文件中。</p>
<p>我们给 gulp.dest() 传入的路径参数，只能用来指定要生成的文件的目录，而不能指定生成文件的文件名，它生成文件的文件名使用的是导入到它的文件流自身的文件名，所以生成的文件名是由导入到它的文件流决定的。</p>
<h3 id="3-5-gulp-watch-方法"><a href="#3-5-gulp-watch-方法" class="headerlink" title="3.5 gulp.watch() 方法"></a>3.5 gulp.watch() 方法</h3><p>gulp.watch 方法是用来监视文件修改的，语法结构为：</p>
<pre><code>gulp.watch(glob [, opts], tasks) // 或
gulp.watch(glob [, opts, cb])
</code></pre><p>glob 表示要监视的文件匹配模式说明，通常是字符串或数组的结构；opts 参数较少使用；tasks 表示当文件发生变化时要执行的任务，该任务是通过 gulp.task() 添加的，参数数据类型为数组类型；cb 表示回调函数，会在每次改变时都被调用到。</p>
<p>使用 tasks 参数示例：</p>
<pre><code>var watcher = gulp.watch(&apos;js/**/*.js&apos;, [&apos;uglify&apos;,&apos;reload&apos;]);
watcher.on(&apos;change&apos;, function(event) {
    console.log(&apos;文件路径：&apos; + event.path + &apos;，类型：&apos; + event.type);
});
</code></pre><p>也可以使用回调函数：</p>
<pre><code>gulp.watch(&apos;js/**/*.js&apos;, function(event) {
    console.log(&apos;文件路径：&apos; + event.path + &apos;，类型：&apos; + event.type);
});
</code></pre><p>回调函数会传递 event 参数来描述所作的改变，该 event 对象有 type 和 path 两个属性。type 描述发生改变的类型，包括：added、changed、deleted 和 renamed；path 描述触发事件的文件路径。</p>
<h2 id="4-常用-Gulp-插件"><a href="#4-常用-Gulp-插件" class="headerlink" title="4. 常用 Gulp 插件"></a>4. 常用 Gulp 插件</h2><p>除了 CSS 与 JS 压缩的插件外，还有其它很多常用到的 Gulp 插件，下面列举一二。</p>
<h3 id="4-1-html-文件压缩"><a href="#4-1-html-文件压缩" class="headerlink" title="4.1 html 文件压缩"></a>4.1 html 文件压缩</h3><p><a href="https://github.com/jonschlinkert/gulp-htmlmin" target="_blank" rel="external">gulp-htmlmin</a>：</p>
<pre><code>$ npm install gulp-htmlmin --save-dev
</code></pre><p>使用 gulp-minify-html 压缩 html 文件：</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    minifyHtml = require(&quot;gulp-htmlmin&quot;);

gulp.task(&apos;minify-html&apos;, function(){
    gulp.src(&apos;**/*.html&apos;) // 要压缩的html文件
        .pipe(minifyHtml({collapseWhitespace: true})) //压缩
        .pipe(gulp.dest(&apos;dist/html&apos;));
});
</code></pre><h3 id="4-2-重命名"><a href="#4-2-重命名" class="headerlink" title="4.2 重命名"></a>4.2 重命名</h3><p><a href="https://github.com/hparra/gulp-rename" target="_blank" rel="external">gulp-rename</a>：</p>
<pre><code>$ npm install gulp-rename --save-dev
</code></pre><p>默认情况下，使用 <code>gulp.dest()</code> 方法写入文件时，文件名使用的是文件流中的文件名，如果要想改变文件名，那可以在之前用 gulp-rename 插件来改变文件流中的文件名：</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    rename = require(&apos;gulp-rename&apos;),
    uglify = require(&quot;gulp-uglify&quot;);

gulp.task(&apos;rename&apos;, function(){
    gulp.src(&apos;js/tools.js&apos;)
        .pipe(uglify())  // 压缩 js
        .pipe(rename(&apos;tools.min.js&apos;)) // 将 tools.js 重命名为 tools.min.js
        .pipe(gulp.dest(&apos;js&apos;));
});
</code></pre><h3 id="4-3-文件合并"><a href="#4-3-文件合并" class="headerlink" title="4.3 文件合并"></a>4.3 文件合并</h3><p><a href="https://github.com/wearefractal/gulp-concat" target="_blank" rel="external">gulp-concat</a>：</p>
<pre><code>$npm install gulp-concat --save-dev
</code></pre><p>gulp-concat 可用来把多个文件合并为一个文件，我们可以用它来合并 JS 或 CSS 文件等，这样就能减少页面的 http 请求数了：</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    concat = require(&quot;gulp-concat&quot;);

gulp.task(&apos;concat&apos;, function () {
    gulp.src(&apos;css/*.css&apos;)  //要合并的文件
        .pipe(concat(&apos;style.css&apos;))  // 合并匹配到的 CSS 文件为 &quot;all.css&quot;
        .pipe(gulp.dest(&apos;dist/css&apos;));
});
</code></pre><h3 id="4-4-SASS-编译"><a href="#4-4-SASS-编译" class="headerlink" title="4.4 SASS 编译"></a>4.4 SASS 编译</h3><p><a href="https://github.com/dlmanning/gulp-sass" target="_blank" rel="external">gulp-sass</a>：</p>
<pre><code>$ npm install gulp-sass --save-dev
</code></pre><p>编译 sass 文件：</p>
<pre><code>var gulp = require(&apos;gulp&apos;),
    sass = require(&quot;gulp-sass&quot;);
gulp.task(&quot;sass&quot;, function(){
    gulp.src(&quot;scss/*.scss&quot;)
        .pipe(sass()) // 编译 sass
        .pipe(minifyCss({ // 压缩 CSS
            advanced:true,
            compatibility:&quot;ie7&quot;,
            keepBreaks:false,
            keepSpecialComments:&quot;*&quot;
        }))
        .pipe(gulp.dest(&quot;dist/css&quot;));
});
</code></pre><p>gulp-sass 是调用 node-sass 来完成编译过程，有 node.js 环境就够了，但有的时候可能在安装 node-sass 过程中出错，只需要重新安装即可。</p>
<h3 id="4-5-自动刷新"><a href="#4-5-自动刷新" class="headerlink" title="4.5 自动刷新"></a>4.5 自动刷新</h3><p><a href="https://github.com/vohof/gulp-livereload" target="_blank" rel="external">gulp-livereload</a>：</p>
<pre><code>$ npm install gulp-livereload --save-dev
</code></pre><p>当代码发生修改变化时，它可以帮我们自动刷新页面，推荐最好配合谷歌浏览器来使用，且要安装 livereload chrome extension 扩展插件。</p>
<pre><code>var gulp = require(&quot;gulp&quot;),
    livereload = require(&quot;gulp-livereload&quot;);

gulp.task(&quot;sass&quot;, function(){
    gulp.src(&quot;scss/*.scss&quot;)
        .pipe(sass())
        .pipe(minifyCss({
            advanced:true,
            compatibility:&quot;ie7&quot;,
            keepBreaks:false,
            keepSpecialComments:&quot;*&quot;
        }))
        .pipe(gulp.dest(&quot;dist/css&quot;))
        .pipe(livereload());
});
gulp.task(&apos;watch&apos;, function() {
    livereload.listen(); //要在这里调用listen()方法
    gulp.watch(&quot;scss/*.scss&quot;, [&apos;sass&apos;]);
});
</code></pre><p>执行：</p>
<pre><code>$ gulp watch
</code></pre><p>这样就可以实时刷新修改的 CSS 内容了。</p>
<h3 id="4-6-自动处理浏览器前缀"><a href="#4-6-自动处理浏览器前缀" class="headerlink" title="4.6 自动处理浏览器前缀"></a>4.6 自动处理浏览器前缀</h3><p><a href="https://github.com/sindresorhus/gulp-autoprefixer" target="_blank" rel="external">gulp-autoprefixer</a>：</p>
<pre><code>$ npm install gulp-autoprefixer --save-dev
</code></pre><p>使用 gulp-autoprefixer 根据设置浏览器版本自动处理浏览器前缀，使用它我们可以很潇洒地写代码，不必考虑各浏览器兼容前缀。</p>
<pre><code>var autoprefixer = require(&apos;gulp-autoprefixer&apos;);

gulp.task(&apos;autoFx&apos;, function () {
    gulp.src(&apos;css/style.css&apos;)
        .pipe(autoprefixer({
            browsers: [&apos;last 2 versions&apos;, &apos;Android &gt;= 4.0&apos;],
            cascade: true, // 是否美化属性值 
            remove:true // 是否去掉不必要的前缀
        }))
        .pipe(gulp.dest(&apos;dist/css&apos;));
});
</code></pre><p>browsers 指明浏览器信息，详情参见 <a href="https://github.com/ai/browserslist#queries" target="_blank" rel="external">browsers 参数详解</a>。</p>

      
    </div>
    
<div class="reward" id="rewardme">
「喜欢，就赞一个呗！(:3 」∠)_ (￣y▽￣)~*」

<div class="reward-qr">
<div class="reward-tks">
「鼓励我写出更好的文字」
<i class="fa fa-window-close" aria-hidden="true"></i>
</div>
<img src= "/img/alipay.jpg" />
「支付宝」
</div>


<div class="reward-btn" >
<div class="reward-text">赏</div>
</div>


</div>
 
    
    




<div class="copyright">
<blockquote>
<strong>本文链接</strong>:  <a href= "http://zhanhongzj.github.io/2017/01/10/gulp用法/" href="_blank" > http://zhanhongzj.github.io/2017/01/10/gulp用法/ </a>
<div>
<strong>版权声明</strong>:本博客所有文章除特别声明外，均采用<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" target="_blank" >CC BY-NC-SA 3.0 CN许可协议</a>进行许可。转载请注明出处！
</div>
</blockquote>
</div>

	

    
    <div class="cat-and-tags">
    
  <div class="article-category">
  	<div class="categories">
  	<i class="fa fa-hashtag" aria-hidden="true"></i>
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>  
  </div>
  

    <div class="show-tags">
<ul>



<li>



<a href=http://zhanhongzj.github.io/tags/gulp >
<i class="fa fa-tags" aria-hidden="true"></i>
gulp
</a>
</li>


</ul>
</div>


    </div>
    
    <!--注意网易云跟贴url位置必须在网易网站配置中的网站域名之下，比如当我在localhost下设置的时候哦
就会因为与网易网站设置的域名不匹配而导致跟贴不能显示出来
-->


<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script>

var pathname=document.location.pathname
var cloudTieConfig = {
  url: "http://zhanhongzj.github.io"+pathname, 
  sourceId: "uuuu",
  productKey: "d9ac976925074859942b446f585903fd",
  target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>

  </div>
 
 
  <!--上一篇下一篇 -->
  
    
<nav id="article-nav">
  
    <a href="/2017/01/10/css-sass/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          SASS 使用教程
        
      </div>
    </a>
  
  
    <a href="/2016/12/10/php-environment/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">SASS 使用教程</div>
    </a>
  
</nav>

  

</div>
</article>

      <footer id="footer">
  <div class="outer">
     
     <div id="footer-info" class="inner">
     
      &copy;  2015 - 2017 
       zhanhong<br>

      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      </br>
      theme <a href="http://github.com/zhangolve/olive">olive</a> by zhangolve
      </div>
      
      
     


     
    
  </div>
  <div class="to-top">
    <div class="toTop-btn">
    <div class="toTop-text">返回顶部</div>
  	<button class="toTop-button">
  		<i class="fa fa-arrow-up" aria-hidden="true"></i>
  	</button >
    </div>
  </div>
</footer>
     
    

<script src="/js/qrcode.js"></script>
<script src="/js/script.js"></script>
<script src="/js/lightmode.js"></script>

<script src="/js/iewarn.js"></script>


  
</body>
</html>